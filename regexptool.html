<!DOCTYPE HTML>
<html>
<head>
<meta charset = "utf-8">
<title>啸工具</title>
</head>
<body>
<br><br>
输入
<input type="text" id="inputT"><br>
正则
<input type="text" id="cusExp"><br>
掐头
<input type="text" id="inputH">
去尾
<input type="text" id="inputE"><br>
<button onClick = "process1()">正它!</button><br>
替换<br>将原文对应正则表达式与替换文本错行交替输入，若有换行请用\n表示<br>
<textarea id="inputA" cols="32" rows="12"></textarea><br>
<button onClick = "process2()">换它!</button><br>
<button onClick = "displayExample()">示例</button><br>
输出<br>
<textarea id="outputT" readonly cols="32" rows="12"></textarea><br>
<textarea id="pageConsole" readonly cols="32" rows="12">日志输出</textarea>






<script>
var input_text;
var ex_H;//head
var ex_E;//end
var reg_S;//single
var ex_A;//alternate

RegExp.prototype.execAndCut = function(str, head, end){
    let temp = this.exec(str);
    let output;
    for(i=0;i<temp.length;i++){output.push(temp[i].replace(head,"").replace(end,""))};
    return(output)
};
String.prototype.replaceMultiple = function(regexps, inputs){
    let output = this;
    for(i=0;i<regexps.length;i++){output = output.replace(regexps[i], inputs[i])};
    return output
};
String.prototype.splitToArrays = function(key, groupsize){
    let temp = this.split(key);
    let output;
    for(i=0;i<temp.length;i++){
        for(j=0;j<=groupsize;j++){output[i].push(temp[i]);i++}
    }
    return output
};



function pConsole(str){
    console.log(str);
    document.getElementById("pageConsole").value += ('\n' + str);
};
function updateVar(){
    input_text = document.getElementById("inputT").value;//text
    ex_H = document.getElementById("inputH").value;//head
    ex_E = document.getElementById("inputE").value;//end
    reg_S = new RegExp(document.getElementById("cusExp").value, "g");//custom
    ex_A = document.getElementById("inputA").value;//alternate
};
function process1(){
    updateVar();
    var output = "";
    temp = reg_S.excuAndCut(input_text, ex_H, ex_E);
    pConsole("项数:" + temp.length);
    for(i=0;i<temp.length;i++){
        output += temp[i] + '\n';
    };
    document.getElementById("outputT").value = output;
};
function process2(){
    updateVar();
    var temp = ex_A.splitToArray();
    document.getElementById("outputT").value = input_text.replaceMultiple(temp[0], temp[1]);
};

function displayExample(){
    document.getElementById("inputT").value = "abcabcabcAbcAbcaBcaBcabCabC";
    document.getElementById("inputH").value = "a";
    document.getElementById("inputE").value = "c";
    document.getElementById("cusExp").value = "(a|A)bc";
    document.getElementById("inputA").value ="bcA\n231\\n000\ncab\n645";
};



</script>
</body>
</html>